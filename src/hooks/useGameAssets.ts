import { useState } from 'react';

export const ASSETS = {
  ship: new Image(),
  iceberg: new Image(),
  mine: new Image(),
  goal: new Image(),
};

export const useGameAssets = () => {
  const [assetsLoaded, setAssetsLoaded] = useState(false);

  const loadAssets = () => {
    let loadedCount = 0;
    const totalAssets = Object.keys(ASSETS).length;

    const onLoad = () => {
      loadedCount++;
      if (loadedCount === totalAssets) {
        setAssetsLoaded(true);
      }
    };

    // Enhanced Halifax-class frigate matching start screen design
    ASSETS.ship.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTIwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDIwTDIwIDVIMTAwTDEyMCAyMEwxMDAgMzVIMjBMMCAyMFoiIGZpbGw9IiM0QTU1NjgiLz48cGF0aCBkPSJNMjUgMTVIMzVWMjVIMjVWMTVaIiBmaWxsPSIjNzE4MDk2Ii8+PHBhdGggZD0iTTQwIDEwSDUwVjMwSDQwVjEwWiIgZmlsbD0iIzRBNTU2OCIvPjxwYXRoIGQ9Ik02MCAxNUg3MFYzNUg2MFYxNVoiIGZpbGw9IiMyRDM3NDgiLz48cGF0aCBkPSJNODAgMTBIMTAwVjMwSDgwVjEwWiIgZmlsbD0iIzRBNTU2OCIvPjxwYXRoIGQ9Ik04NSA1SDk1VjEwSDg1VjVaIiBmaWxsPSIjMkQzNzQ4Ii8+PHBhdGggZD0iTTg1IDJIOTBMOTIgMEg4OEw4NSAyWiIgZmlsbD0iI0EwQUVDMCIvPjxwYXRoIGQ9Ik01MCAxMEg2MFYyMEg1MFYxMFoiIGZpbGw9IiM3MTgwOTYiLz48cGF0aCBkPSJNMzAgMTJINDBWMThIMzBWMTJaIiBmaWxsPSIjOTBDREY0Ii8+PHBhdGggZD0iTTQ1IDE3SDU1VjIzSDQ1VjE3WiIgZmlsbD0iIzkwQ0RGNCIvPjxwYXRoIGQ9Ik03MCAxNUg4MFYyNUg3MFYxNVoiIGZpbGw9IiM3MTgwOTYiLz48cGF0aCBkPSJNODAgMjVIMTAwVjMwSDgwVjI1WiIgZmlsbD0iIzcxODA5NiIvPjwvc3ZnPg==';
    ASSETS.ship.onload = onLoad;

    // Keep existing iceberg
    ASSETS.iceberg.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTAgNDBMMCA1MEw4MCA0MEw3MCAyMEw2MCAzMEw0MCA1TDMwIDI1TDIwIDEwTDEwIDQwWiIgZmlsbD0iI0UyRThGMCIvPjxwYXRoIGQ9Ik0yMCAxMEwzMCAyNUw0MCA1TDYwIDMwTDcwIDIwTDQwIDM1TDIwIDQ1TDEwIDQwTDIwIDEwWiIgZmlsbD0iI0EwQUVCMiIvPjxwYXRoIGQ9Ik0zMCAyNUw0MCAzNUw2MCAzMEw0MCA1TDMwIDI1WiIgZmlsbD0iI0Y1RjdGQSIvPjwvc3ZnPg==';
    ASSETS.iceberg.onload = onLoad;

    // Redesigned sea mine with menacing spikes
    ASSETS.mine.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSIxNSIgZmlsbD0iIzFBMjAyQyIvPjxjaXJjbGUgY3g9IjMwIiBjeT0iMzAiIHI9IjEyIiBmaWxsPSIjMkQzNzQ4Ii8+PHBhdGggZD0iTTMwIDBMMzUgMTVMMjUgMTVMMzAgMFoiIGZpbGw9IiM0QTU1NjgiLz48cGF0aCBkPSJNNjAgMzBMNDUgMzVMNDUgMjVMNjAgMzBaIiBmaWxsPSIjNEE1NTY4Ii8+PHBhdGggZD0iTTAgMzBMMTUgMjVMMTUgMzVMMCAzMFoiIGZpbGw9IiM0QTU1NjgiLz48cGF0aCBkPSJNMzAgNjBMMjUgNDVMMzUgNDVMMzAgNjBaIiBmaWxsPSIjNEE1NTY4Ii8+PHBhdGggZD0iTTEwIDEwTDIyIDIyTDE4IDE4TDEwIDEwWiIgZmlsbD0iIzRBNTU2OCIvPjxwYXRoIGQ9Ik01MCA1MEwzOCAzOEw0MiA0Mkw1MCA1MFoiIGZpbGw9IiM0QTU1NjgiLz48cGF0aCBkPSJNNTAgMTBMNDIgMThMMzggMjJMNTAgMTBaIiBmaWxsPSIjNEE1NTY4Ii8+PHBhdGggZD0iTTEwIDUwTDE4IDQyTDIyIDM4TDEwIDUwWiIgZmlsbD0iIzRBNTU2OCIvPjxjaXJjbGUgY3g9IjMwIiBjeT0iMzAiIHI9IjgiIGZpbGw9IiMzNjNENEIiLz48Y2lyY2xlIGN4PSIyOCIgY3k9IjI4IiByPSIzIiBmaWxsPSIjOTBDREY0Ii8+PC9zdmc+';
    ASSETS.mine.onload = onLoad;

    // Keep existing goal zone
    ASSETS.goal.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgODAwIDUwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDBIODAwVjUwSDBWMFoiIGZpbGw9IiM0QzUxQkYiIGZpbGwtb3BhY2l0eT0iMC4yIi8+PHBhdGggZD0iTTAgMEg1MFY1MEgwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik0xMDAgMEgxNTBWNTBIMTAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik0yMDAgMEgyNTBWNTBIMjAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik0zMDAgMEgzNTBWNTBIMzAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik00MDAgMEg0NTBWNTBINDAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik01MDAgMEg1NTBWNTBINTAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik02MDAgMEg2NTBWNTBINjAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjxwYXRoIGQ9Ik03MDAgMEg3NTBWNTBINzAwVjBaIiBmaWxsPSIjNEM1MUJGIiBmaWxsLW9wYWNpdHk9IjAuNCIvPjwvc3ZnPg==';
    ASSETS.goal.onload = onLoad;
  };

  return { assetsLoaded, loadAssets };
};
